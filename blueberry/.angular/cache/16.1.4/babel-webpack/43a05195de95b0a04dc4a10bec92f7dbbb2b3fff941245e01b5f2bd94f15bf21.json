{"ast":null,"code":"import { MatDialog } from \"@angular/material/dialog\";\nimport { APIService } from \"../services/api.service\";\nimport { CommandService } from \"../services/command.service\";\nimport { SocketService } from \"../services/socket.service\";\nimport { HomeComponent } from \"./home.component\";\nimport { AudioComponent } from \"./audio/audio.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"../services/socket.service\";\nimport * as i3 from \"../services/command.service\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/progress-spinner\";\nimport * as i7 from \"./home.component\";\nimport * as i8 from \"./management.component\";\nfunction AppComponent_div_3_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"object\", 7)(2, \"span\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AppComponent_div_3_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"mat-spinner\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\", 11);\n    i0.ɵɵtext(3, \"powering on, please wait...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_3_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      ctx_r5.unlock();\n      return i0.ɵɵresetView(ctx_r5.command.buttonPress(\"power on\"));\n    })(\"press\", function AppComponent_div_3_Template_div_press_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      ctx_r7.unlock();\n      return i0.ɵɵresetView(ctx_r7.command.buttonPress(\"long press power on\"));\n    });\n    i0.ɵɵtemplate(1, AppComponent_div_3_ng_container_1_Template, 3, 0, \"ng-container\", 5);\n    i0.ɵɵtemplate(2, AppComponent_div_3_ng_template_2_Template, 4, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r3 = i0.ɵɵreference(3);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.unlocking)(\"ngIfElse\", _r3);\n  }\n}\nfunction AppComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_5_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.socket.screenoff = false);\n    })(\"press\", function AppComponent_div_5_Template_div_press_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.socket.screenoff = false);\n    });\n    i0.ɵɵtext(1, \" press anywhere to start\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(api, socket, command, dialog) {\n      this.api = api;\n      this.socket = socket;\n      this.command = command;\n      this.dialog = dialog;\n      this.unlocking = false;\n      this.location = window.location;\n      this.showManagement = () => {\n        if (this.dialog.openDialogs.length > 0) {\n          return false;\n        }\n        if (this.home.audio && this.home.audio.isShowing()) {\n          return false;\n        }\n        if (!this.home) {\n          return true;\n        }\n        if (!this.home.wheel) {\n          return true;\n        }\n        if (this.home.wheel.getPower() === \"standby\") {\n          return true;\n        }\n        return false;\n      };\n    }\n    unlock() {\n      if (this.home.wheel == null) {\n        return;\n      }\n      this.unlocking = true;\n      this.home.turnOn().subscribe(success => {\n        if (!success) {\n          console.log(\"failed to turn on\");\n          this.unlocking = false;\n        } else {\n          setTimeout(() => this.unlocking = false, 1000);\n        }\n      });\n    }\n  }\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.APIService), i0.ɵɵdirectiveInject(i2.SocketService), i0.ɵɵdirectiveInject(i3.CommandService), i0.ɵɵdirectiveInject(i4.MatDialog));\n  };\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    viewQuery: function AppComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(HomeComponent, 5);\n        i0.ɵɵviewQuery(AudioComponent, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.home = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.audio = _t.first);\n      }\n    },\n    decls: 6,\n    vars: 3,\n    consts: [[1, \"basediv\"], [3, \"enabled\"], [\"class\", \"lock\", 3, \"click\", \"press\", 4, \"ngIf\"], [\"id\", \"screenoff\", 3, \"click\", \"press\", 4, \"ngIf\"], [1, \"lock\", 3, \"click\", \"press\"], [4, \"ngIf\", \"ngIfElse\"], [\"poweringOn\", \"\"], [\"type\", \"image/svg+xml\", \"data\", i0.ɵɵtrustConstantResourceUrl`db/logo.svg`, 1, \"logo\"], [1, \"text\", \"unlock\"], [1, \"logo\"], [\"color\", \"primary\"], [1, \"text\", \"smaller\"], [\"id\", \"screenoff\", 3, \"click\", \"press\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"management\", 1);\n        i0.ɵɵelementContainerStart(2);\n        i0.ɵɵtemplate(3, AppComponent_div_3_Template, 4, 2, \"div\", 2);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelement(4, \"home\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, AppComponent_div_5_Template, 2, 0, \"div\", 3);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"enabled\", ctx.showManagement());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", (ctx.home == null ? null : ctx.home.wheel == null ? null : ctx.home.wheel.getPower()) !== \"on\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.socket.screenoff);\n      }\n    },\n    dependencies: [i5.NgIf, i6.MatProgressSpinner, i7.HomeComponent, i8.ManagementComponent],\n    styles: [\".basediv[_ngcontent-%COMP%]{position:absolute;overflow:hidden;left:0;top:0;width:100%;height:100vh}.basediv[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{position:absolute;min-width:100%;min-height:100%;z-index:500;opacity:1;pointer-events:auto;display:flex;flex-direction:column;justify-content:center;align-items:center}.basediv[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-top:3%;font-size:150%;color:#fff;filter:invert(5%)}.basediv[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]   .text.smaller[_ngcontent-%COMP%]{transform:scale(.75)}.basediv[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]   .text.unlock[_ngcontent-%COMP%]:after{content:var(--lock-message);color:var(--lock-message-color)}.basediv[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:70vh;width:70vh;display:flex;justify-content:center;align-items:center;pointer-events:none;filter:invert(5%)}#screenoff[_ngcontent-%COMP%]{position:absolute;min-height:100vh;min-width:100vw;z-index:2000;display:flex;justify-content:center;align-items:center;font-size:8vh}@keyframes _ngcontent-%COMP%_grow{0%{transform:scale(.7)}to{transform:scale(3)}}@keyframes _ngcontent-%COMP%_spin{2%{transform:scale(.7) rotateY(28.8deg)}4%{transform:scale(.7) rotateY(43.2deg)}6%{transform:scale(.7) rotateY(64.8deg)}8%{transform:scale(.7) rotateY(93.6deg)}10%{transform:scale(.7) rotateY(129.6deg)}12%{transform:scale(.7) rotateY(172.8deg)}14%{transform:scale(.7) rotateY(223.2deg)}16%{transform:scale(.7) rotateY(280.8deg)}18%{transform:scale(.7) rotateY(345.6deg)}20%{transform:scale(.7) rotateY(417.6deg)}22%{transform:scale(.7) rotateY(496.8deg)}24%{transform:scale(.7) rotateY(583.2deg)}26%{transform:scale(.7) rotateY(676.8deg)}28%{transform:scale(.7) rotateY(777.6deg)}30%{transform:scale(.7) rotateY(885.6deg)}32%{transform:scale(.7) rotateY(1000.8deg)}34%{transform:scale(.7) rotateY(1123.2deg)}36%{transform:scale(.7) rotateY(1252.8deg)}38%{transform:scale(.7) rotateY(1389.6deg)}40%{transform:scale(.7) rotateY(1533.6deg)}42%{transform:scale(.7) rotateY(1684.8deg)}44%{transform:scale(.7) rotateY(1843.2deg)}46%{transform:scale(.7) rotateY(2008.8deg)}48%{transform:scale(.7) rotateY(2181.6deg)}50%{transform:scale(.7) rotateY(2361.6deg)}52%{transform:scale(.7) rotateY(2548.8deg)}54%{transform:scale(.7) rotateY(2743.2deg)}56%{transform:scale(.7) rotateY(2944.8deg)}58%{transform:scale(.7) rotateY(3153.6deg)}60%{transform:scale(.7) rotateY(3369.6deg)}62%{transform:scale(.7) rotateY(3592.8deg)}64%{transform:scale(.7) rotateY(3823.2deg)}66%{transform:scale(.7) rotateY(4060.8deg)}68%{transform:scale(.7) rotateY(4305.6deg)}70%{transform:scale(.7) rotateY(4557.6deg)}72%{transform:scale(.7) rotateY(4816.8deg)}74%{transform:scale(.7) rotateY(5083.2deg)}76%{transform:scale(.7) rotateY(5356.8deg)}78%{transform:scale(.7) rotateY(5637.6deg)}80%{transform:scale(.7) rotateY(5925.6deg)}82%{transform:scale(.7) rotateY(6220.8deg)}84%{transform:scale(.7) rotateY(6523.2deg)}86%{transform:scale(.7) rotateY(6832.8deg)}88%{transform:scale(.7) rotateY(7149.6deg)}90%{transform:scale(.7) rotateY(7473.6deg)}92%{transform:scale(.7) rotateY(7804.8deg)}94%{transform:scale(.7) rotateY(8143.2deg)}96%{transform:scale(.7) rotateY(8488.8deg)}98%{transform:scale(.7) rotateY(8841.6deg)}to{transform:scale(.7) rotateY(9201.6deg)}}\", \".basediv[_ngcontent-%COMP%], .basediv[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{background-color:var(--background-color);box-shadow:var(--background-shadow)}#screenoff[_ngcontent-%COMP%]{background-color:var(--background-color);box-shadow:var(--background-shadow);color:#fff}.circle[_ngcontent-%COMP%]   .wheel[_ngcontent-%COMP%]{border:.2vh solid var(--wheel-outline-color)}.circle[_ngcontent-%COMP%]   .wheel[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-shadow:0 0 1.2vh black}.circle[_ngcontent-%COMP%]   .wheel[_ngcontent-%COMP%]   .input-slice[_ngcontent-%COMP%]{background-color:var(--input-color);box-shadow:inset 0 0 30vh 1vh #0000004d}.circle[_ngcontent-%COMP%]   .wheel[_ngcontent-%COMP%]   .input-slice[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{color:var(--input-text-color)}.circle[_ngcontent-%COMP%]   .wheel[_ngcontent-%COMP%]   .title-slice[_ngcontent-%COMP%]{background-color:var(--wheel-title-color)}.circle[_ngcontent-%COMP%]   .wheel[_ngcontent-%COMP%]   .selected-input[_ngcontent-%COMP%]{background-color:var(--selected-input-color)}.circle[_ngcontent-%COMP%]   .wheel[_ngcontent-%COMP%]   .selected-input[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{color:var(--selected-input-text-color)}.circle[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{background-color:var(--center-off-color);border:.5vh solid var(--wheel-outline-color);color:var(--center-text-color);box-shadow:inset 0 0 15vh 3vh #0000004d}.circle[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--wheel-title-text-color)}.circle[_ngcontent-%COMP%]   .center.on[_ngcontent-%COMP%]{background-color:var(--center-on-color)}.circle[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:var(text-color)}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}