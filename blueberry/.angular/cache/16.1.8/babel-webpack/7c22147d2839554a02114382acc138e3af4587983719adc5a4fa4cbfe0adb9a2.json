{"ast":null,"code":"import _defineProperty from \"/home/orcrist/Desktop/touchpanel-ui-microservice/blueberry/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { CommandService } from \"../../services/command.service\";\nimport { AudioDevice } from \"../../objects/status.objects\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/command.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/icon\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"../volume/volume.component\";\nfunction AudioComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AudioComponent_ng_container_8_ng_container_3_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"volume\", 11);\n    i0.ɵɵlistener(\"levelChange\", function AudioComponent_ng_container_8_ng_container_3_div_5_Template_volume_levelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const a_r5 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r7.command.setVolume($event, [a_r5]));\n    })(\"muteChange\", function AudioComponent_ng_container_8_ng_container_3_div_5_Template_volume_muteChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const a_r5 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.command.setMute($event, [a_r5]));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const a_r5 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    i0.ɵɵproperty(\"id\", \"device\" + i_r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"level\", a_r5 == null ? null : a_r5.volume)(\"mute\", a_r5 == null ? null : a_r5.muted)(\"name\", a_r5 == null ? null : a_r5.displayname);\n  }\n}\nfunction AudioComponent_ng_container_8_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 5)(2, \"div\", 6)(3, \"div\", 7)(4, \"div\", 8);\n    i0.ɵɵtemplate(5, AudioComponent_ng_container_8_ng_container_3_div_5_Template, 2, 4, \"div\", 9);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 10)(7, \"volume\", 11);\n    i0.ɵɵlistener(\"levelChange\", function AudioComponent_ng_container_8_ng_container_3_Template_volume_levelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.command.setVolume($event, ctx_r10.preset == null ? null : ctx_r10.preset.audioDevices));\n    })(\"muteChange\", function AudioComponent_ng_container_8_ng_container_3_Template_volume_muteChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.command.setMute($event, ctx_r12.preset == null ? null : ctx_r12.preset.audioDevices));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.devices);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"level\", ctx_r2.getDisplayVolume())(\"mute\", ctx_r2.getDisplayMute())(\"name\", ctx_r2.getInputName());\n  }\n}\nfunction AudioComponent_ng_container_8_ng_container_4_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"volume\", 11);\n    i0.ɵɵlistener(\"levelChange\", function AudioComponent_ng_container_8_ng_container_4_div_7_Template_volume_levelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const a_r15 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r17.command.setVolume($event, [a_r15]));\n    })(\"muteChange\", function AudioComponent_ng_container_8_ng_container_4_div_7_Template_volume_muteChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const a_r15 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r19.command.setMute($event, [a_r15]));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const a_r15 = ctx.$implicit;\n    const i_r16 = ctx.index;\n    i0.ɵɵproperty(\"id\", \"device\" + i_r16);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"level\", a_r15 == null ? null : a_r15.volume)(\"mute\", a_r15 == null ? null : a_r15.muted)(\"name\", a_r15 == null ? null : a_r15.displayname);\n  }\n}\nfunction AudioComponent_ng_container_8_ng_container_4_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 18);\n  }\n  if (rf & 2) {\n    const i_r20 = ctx.$implicit;\n    const ctx_r14 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"selected\", i_r20 === ctx_r14.curPage);\n  }\n}\nfunction AudioComponent_ng_container_8_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 6)(2, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function AudioComponent_ng_container_8_ng_container_4_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.pageLeft());\n    });\n    i0.ɵɵelementStart(3, \"mat-icon\", 14);\n    i0.ɵɵtext(4, \"keyboard_arrow_left\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 7)(6, \"div\", 8);\n    i0.ɵɵtemplate(7, AudioComponent_ng_container_8_ng_container_4_div_7_Template, 2, 4, \"div\", 9);\n    i0.ɵɵelement(8, \"div\", 12)(9, \"div\", 12)(10, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 15);\n    i0.ɵɵtemplate(12, AudioComponent_ng_container_8_ng_container_4_span_12_Template, 1, 2, \"span\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function AudioComponent_ng_container_8_ng_container_4_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r23.pageRight());\n    });\n    i0.ɵɵelementStart(14, \"mat-icon\", 14);\n    i0.ɵɵtext(15, \"keyboard_arrow_right\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 10)(17, \"volume\", 11);\n    i0.ɵɵlistener(\"levelChange\", function AudioComponent_ng_container_8_ng_container_4_Template_volume_levelChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r24.command.setVolume($event, ctx_r24.preset == null ? null : ctx_r24.preset.audioDevices));\n    })(\"muteChange\", function AudioComponent_ng_container_8_ng_container_4_Template_volume_muteChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.command.setMute($event, ctx_r25.preset == null ? null : ctx_r25.preset.audioDevices));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"hidden\", !ctx_r3.canPageLeft());\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.devices);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", \"device\" + (ctx_r3.devices == null ? null : ctx_r3.devices.length));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", \"device\" + ((ctx_r3.devices == null ? null : ctx_r3.devices.length) + 1));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", \"device\" + ((ctx_r3.devices == null ? null : ctx_r3.devices.length) + 2));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.pages);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"hidden\", !ctx_r3.canPageRight());\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"level\", ctx_r3.getDisplayVolume())(\"mute\", ctx_r3.getDisplayMute())(\"name\", ctx_r3.getInputName());\n  }\n}\nfunction AudioComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h1\", 4);\n    i0.ɵɵtext(2, \"Audio Control\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, AudioComponent_ng_container_8_ng_container_3_Template, 8, 4, \"ng-container\", 2);\n    i0.ɵɵtemplate(4, AudioComponent_ng_container_8_ng_container_4_Template, 18, 12, \"ng-container\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.devices.length <= 4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.devices.length > 4);\n  }\n}\nexport let AudioComponent = /*#__PURE__*/(() => {\n  var _class;\n  class AudioComponent {\n    constructor(command) {\n      _defineProperty(this, \"command\", void 0);\n      _defineProperty(this, \"preset\", void 0);\n      _defineProperty(this, \"devices\", []);\n      _defineProperty(this, \"pages\", []);\n      _defineProperty(this, \"curPage\", void 0);\n      _defineProperty(this, \"_show\", void 0);\n      _defineProperty(this, \"show\", preset => {\n        this.preset = preset;\n        this.devices.length = 0; // reset devices\n        for (const a of preset.independentAudioDevices) {\n          this.devices.push(a);\n        }\n        const pages = Math.ceil(this.devices.length / 4);\n        this.pages = new Array(pages).fill(undefined).map((x, i) => i);\n        console.log(\"devices:\", this.devices.length, \"pages:\", this.pages);\n        this.curPage = 0;\n        this._show = true;\n      });\n      _defineProperty(this, \"hide\", () => {\n        this.command.buttonPress(\"close audio modal\");\n        this._show = false;\n      });\n      _defineProperty(this, \"isShowing\", () => {\n        return this._show;\n      });\n      _defineProperty(this, \"getDisplayVolume\", () => {\n        return AudioDevice.getVolume(this.preset.audioDevices);\n      });\n      _defineProperty(this, \"getDisplayMute\", () => {\n        return AudioDevice.getMute(this.preset.audioDevices);\n      });\n      _defineProperty(this, \"pageLeft\", () => {\n        if (this.canPageLeft()) {\n          this.curPage--;\n        }\n        // scroll to the bottom of the page\n        const idx = 3 * this.curPage;\n        console.log(document.querySelector(\"#device\" + idx));\n        document.querySelector(\"#device\" + idx).scrollIntoView({\n          behavior: \"smooth\",\n          block: \"nearest\",\n          inline: \"start\"\n        });\n      });\n      _defineProperty(this, \"pageRight\", () => {\n        if (this.canPageRight()) {\n          this.curPage++;\n        }\n        // scroll to the top of the page\n        const idx = 4 * this.curPage + 3;\n        console.log(document.querySelector(\"#device\" + idx));\n        document.querySelector(\"#device\" + idx).scrollIntoView({\n          behavior: \"smooth\",\n          block: \"nearest\",\n          inline: \"start\"\n        });\n      });\n      _defineProperty(this, \"canPageLeft\", () => {\n        if (this.curPage <= 0) {\n          return false;\n        }\n        return true;\n      });\n      _defineProperty(this, \"canPageRight\", () => {\n        if (this.curPage + 1 >= this.pages.length) {\n          return false;\n        }\n        return true;\n      });\n      _defineProperty(this, \"getInputName\", () => {\n        if (!this.preset) {\n          return \"Display Volume\";\n        }\n        if (!this.preset.displays || this.preset.displays.length === 0) {\n          return \"Display Volume\";\n        }\n        if (!this.preset.displays[0].input || !this.preset.displays[0].input.name) {\n          return \"Display Volume\";\n        }\n        return \"Display Volume (\" + this.preset.displays[0].input.displayname + \")\";\n      });\n      this.command = command;\n      this._show = false;\n    }\n    ngOnInit() {}\n  }\n  _class = AudioComponent;\n  _defineProperty(AudioComponent, \"\\u0275fac\", function AudioComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.CommandService));\n  });\n  _defineProperty(AudioComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"audiocontrol\"]],\n    decls: 9,\n    vars: 4,\n    consts: [[1, \"container\", \"primary-background\"], [\"color\", \"warn\", \"mat-button\", \"\", 1, \"exit\", 3, \"click\", \"press\"], [4, \"ngIf\"], [1, \"audiodevices\"], [1, \"header\", \"text\", \"title\"], [1, \"no-scroll\"], [1, \"content\"], [1, \"mixers\"], [1, \"sliders\"], [\"class\", \"slider-container\", 3, \"id\", 4, \"ngFor\", \"ngForOf\"], [1, \"master\", \"slider-container\"], [1, \"slider\", 3, \"level\", \"mute\", \"name\", \"levelChange\", \"muteChange\"], [1, \"slider-container\", 3, \"id\"], [\"color\", \"accent\", \"mat-button\", \"\", 1, \"button\", \"left\", 3, \"click\"], [2, \"transform\", \"scale(3)\"], [1, \"page-indicator\", \"fake\"], [\"class\", \"dot\", 3, \"selected\", 4, \"ngFor\", \"ngForOf\"], [\"color\", \"accent\", \"mat-button\", \"\", 1, \"button\", \"right\", 3, \"click\"], [1, \"dot\"]],\n    template: function AudioComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function AudioComponent_Template_button_click_1_listener() {\n          return ctx.hide();\n        })(\"press\", function AudioComponent_Template_button_press_1_listener() {\n          return ctx.hide();\n        });\n        i0.ɵɵelementStart(2, \"mat-icon\");\n        i0.ɵɵtext(3, \"keyboard_backspace\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"span\");\n        i0.ɵɵtext(5, \"Back\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(6, AudioComponent_ng_container_6_Template, 1, 0, \"ng-container\", 2);\n        i0.ɵɵelementStart(7, \"div\", 3);\n        i0.ɵɵtemplate(8, AudioComponent_ng_container_8_Template, 5, 2, \"ng-container\", 2);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"show\", ctx._show);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.devices.length === 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.devices.length > 0);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.MatIcon, i4.MatButton, i5.VolumeComponent],\n    styles: [\".container[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;top:0;left:0;display:none}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:8%;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:84%}.container.show[_ngcontent-%COMP%]{display:unset;z-index:2000}.audiodevices[_ngcontent-%COMP%]{height:100%;width:100%;opacity:1;display:unset;transition:.3s opacity ease-in-out}.text[_ngcontent-%COMP%]{text-align:center;font-family:Roboto,Helvetica Neue,sans-serif;font-size:1.3em}.text.title[_ngcontent-%COMP%]{color:#fff;font-size:1.7em}.exit[_ngcontent-%COMP%]{position:absolute;top:4vh;left:5vh;background-color:transparent;color:#fff}.exit[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:scale(2.5)}.exit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5em;margin-left:2.5vw}.items[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}activity-button[_ngcontent-%COMP%]{margin-left:8px}.content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-wrap:nowrap;padding:0;overflow:hidden}.no-scroll[_ngcontent-%COMP%]{height:84%;width:100%;display:flex;align-items:center}.no-scroll[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:80%;height:100%}.no-scroll[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mixers[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;width:100%}.no-scroll[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mixers[_ngcontent-%COMP%]   .sliders[_ngcontent-%COMP%]{justify-content:space-evenly}.no-scroll[_ngcontent-%COMP%]   .master[_ngcontent-%COMP%]{height:88%;display:flex;align-items:center}.no-scroll[_ngcontent-%COMP%]   .master[_ngcontent-%COMP%]:before{right:21vw}.slider-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:88%;width:17vw;flex:0 0 auto}.slider-container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1.1em;word-wrap:break-word}.slider-container[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{height:100%}.master[_ngcontent-%COMP%]{top:0;height:88%;width:17vw;display:flex;align-items:center}.master[_ngcontent-%COMP%]:before{position:absolute;background:linear-gradient(180deg,rgba(0,0,0,0),rgba(0,0,0,.7) 20%,rgba(0,0,0,.7) 80%,rgba(0,0,0,0));right:18vw;top:30%;width:.4vw;height:50vh;content:\\\"\\\"}.mixers[_ngcontent-%COMP%]{height:100%;width:68vw;display:flex;flex-direction:column;align-items:center}.mixers[_ngcontent-%COMP%]   .sliders[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;overflow:hidden;align-items:center;height:100%;width:100%}.mixers[_ngcontent-%COMP%]   .sliders[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.mixers[_ngcontent-%COMP%]   .page-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-end;height:3vh;width:100%;position:absolute;bottom:2.3vh}.mixers[_ngcontent-%COMP%]   .page-indicator[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:.5em;width:.5em;margin-right:.35em;background-color:#8b8b8b;border-radius:50%;display:inline-block}.mixers[_ngcontent-%COMP%]   .page-indicator[_ngcontent-%COMP%]   .dot.selected[_ngcontent-%COMP%]{background-color:#f6f6f6}.button[_ngcontent-%COMP%]{height:70%;min-width:5vw;width:5vw;display:flex;justify-content:center;align-items:center;margin-bottom:5vh;transition:.3s opacity ease-in-out;background-color:transparent;color:#fff}.button.right[_ngcontent-%COMP%]{margin-right:2vw}.button.left[_ngcontent-%COMP%]{margin-left:2vw}.hidden[_ngcontent-%COMP%]{pointer-events:none;opacity:0}\"]\n  }));\n  return AudioComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}